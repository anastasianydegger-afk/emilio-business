<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="build-date" content="2026-02-16T14:53:00Z">
    <meta name="version" content="3.8-unified-ids">
    <title>ü¶Ä Job Filter</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #fafafa; color: #333; padding: 20px 16px; }
        .container { max-width: 900px; margin: 0 auto; }
        header { margin-bottom: 30px; text-align: center; }
        h1 { font-size: 24px; font-weight: 700; margin-bottom: 6px; }
        .subtitle { font-size: 13px; color: #999; }
        .stats { display: flex; gap: 30px; justify-content: center; margin-top: 16px; font-size: 13px; }
        .stat-number { font-weight: 600; margin-right: 6px; }
        .filters { display: flex; gap: 8px; justify-content: center; margin-bottom: 24px; flex-wrap: wrap; }
        .filter-btn { padding: 8px 16px; border: 1px solid #e0e0e0; border-radius: 20px; font-size: 13px; cursor: pointer; background: white; transition: all 0.2s; font-weight: 500; }
        .filter-btn:hover { border-color: #333; }
        .filter-btn.active { background: #333; color: white; border-color: #333; }
        .job-card { background: white; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; margin-bottom: 16px; }
        .job-header { display: flex; justify-content: space-between; margin-bottom: 12px; align-items: flex-start; }
        .job-title { font-size: 16px; font-weight: 600; }
        .job-company { font-size: 13px; color: #666; margin-top: 4px; }
        .job-link { font-size: 12px; color: #0066cc; margin-top: 4px; }
        .job-link a { color: #0066cc; text-decoration: none; }
        .job-link a:hover { text-decoration: underline; }
        .job-score { display: inline-block; background: #f0f0f0; padding: 4px 10px; border-radius: 16px; font-size: 11px; font-weight: 600; }
        .job-details { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin: 16px 0; padding-bottom: 12px; border-bottom: 1px solid #f0f0f0; }
        .detail { display: flex; flex-direction: column; gap: 2px; }
        .detail-label { font-size: 10px; color: #999; text-transform: uppercase; font-weight: 500; }
        .detail-value { font-size: 13px; }
        .hidden { display: none !important; }
        .actions { margin-top: 12px; display: flex; gap: 8px; flex-wrap: wrap; }
        .btn { padding: 6px 14px; border: 1px solid #e0e0e0; border-radius: 6px; font-size: 12px; font-weight: 500; cursor: pointer; background: white; }
        .btn:hover { border-color: #333; }
        .btn-save { background: #e8f5e9; color: #2e7d32; border-color: #c8e6c9; }
        .btn-save:hover { background: #c8e6c9; }
        .btn-reject { background: #ffebee; color: #c62828; border-color: #ffcdd2; }
        .btn-reject:hover { background: #ffcdd2; }
        .reject-reason { font-size: 12px; color: #c62828; margin-top: 8px; padding: 8px 12px; background: #ffebee; border-radius: 6px; font-weight: 500; }
        .filter-reason { font-size: 12px; color: #1565c0; margin-top: 8px; padding: 8px 12px; background: #e3f2fd; border-radius: 6px; font-weight: 500; }
        .comment-box { display: none; margin-top: 8px; gap: 8px; width: 100%; }
        .comment-box.show { display: flex; }
        .comment-box input { flex: 1; padding: 6px 10px; border: 1px solid #e0e0e0; border-radius: 6px; font-size: 12px; }
        .comment-box button { padding: 6px 12px; background: #c62828; color: white; border: none; border-radius: 6px; font-size: 12px; cursor: pointer; }
        .source { font-size: 10px; color: #ccc; margin-top: 10px; padding-top: 10px; border-top: 1px solid #f0f0f0; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ü¶Ä Job Filter App</h1>
            <p class="subtitle">Feb 16, 2026 14:53 UTC ‚Äî v3.8 with Unified IDs & Proper Rejection Loading</p>
            <div class="stats">
                <div><span class="stat-number" id="stat-new">0</span>üÜï –ù–æ–≤—ã–µ</div>
                <div><span class="stat-number" id="stat-interested">0</span>‚ù§Ô∏è –ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ</div>
                <div><span class="stat-number" id="stat-rejected">0</span>‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–æ</div>
                <div><span class="stat-number" id="stat-filtered">0</span>ü§ñ –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ</div>
            </div>
        </header>

        <div class="filters">
            <button class="filter-btn active" onclick="filterJobs('new')">üÜï –ù–æ–≤—ã–µ</button>
            <button class="filter-btn" onclick="filterJobs('interested')">‚ù§Ô∏è –ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ</button>
            <button class="filter-btn" onclick="filterJobs('rejected')">‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–æ</button>
            <button class="filter-btn" onclick="filterJobs('filtered')">ü§ñ –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ</button>
            <button class="filter-btn" onclick="exportToChat()" style="background:#f5f5f5;border-color:#ddd;margin-left:auto;">üìã Export</button>
        </div>

        <div id="positions-container"></div>
    </div>

    <script>
        // ===== VERSION & CACHE BUSTER =====
        const CURRENT_VERSION = '3.8-unified-ids';
        const LAST_BUILD = '2026-02-16T14:53:00Z';
        const storedVersion = localStorage.getItem('emilio_app_version');
        
        if (storedVersion !== CURRENT_VERSION) {
            console.log(`üöÄ Version ${storedVersion || 'none'} ‚Üí ${CURRENT_VERSION}`);
            localStorage.clear();
            localStorage.setItem('emilio_app_version', CURRENT_VERSION);
            if ('caches' in window) {
                caches.keys().then(names => names.forEach(name => caches.delete(name)));
            }
        }

        // All 20 unique positions with UNIFIED IDs
        const allJobs = [
            // Jobs 0-12: –ù–æ–≤—ã–µ (–Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ)
            { id: 'job_0', title: 'Options Group', role: '(Senior) Chief of Staff (m/f/d)', location: 'Frankfurt, Germany (Hybrid)', score: '76/100', link: 'https://www.linkedin.com/jobs/view/4364770693/' },
            { id: 'job_1', title: 'Alpine Eagle', role: 'Founder\'s Associate (m/w/d)', location: 'Basel, Switzerland', score: '68/100', link: 'https://www.linkedin.com/jobs/view/4337094476/' },
            { id: 'job_2', title: 'Relay', role: 'CoS (Venture-backed)', location: 'Remote (EU)', score: '72/100', link: 'https://careers.relay.app/' },
            { id: 'job_3', title: 'Vial', role: 'Chief of Staff, Commercial', location: 'Remote (EU)', score: '74/100', link: 'https://careers.vial.team/' },
            { id: 'job_4', title: 'Blox Space', role: 'Operations Manager', location: 'Remote (EU)', score: '66/100', link: 'https://careers.bloxspace.io/' },
            { id: 'job_5', title: 'Revolut', role: 'Strategy & Operations Manager', location: 'Switzerland', score: '82/100', link: 'https://www.linkedin.com/jobs/view/' },
            { id: 'job_6', title: 'Mistral AI', role: 'Product Ops Manager', location: 'Paris, France', score: '70/100', link: 'https://careers.mistral.ai/' },
            { id: 'job_7', title: 'Beloy', role: 'Chief of Staff', location: 'Paris, France', score: '78/100', link: 'https://wttj.co/jobs/jobs-paris-chief-of-staff-at-beloy' },
            { id: 'job_8', title: 'Expatrio', role: 'Chief of Staff (f/m/x)', location: 'Berlin, Germany', score: '68/100', link: 'https://de.linkedin.com/jobs/view/chief-of-staff-f-m-x-at-expatrio-3737917498' },
            { id: 'job_9', title: 'SumUp', role: 'Chief of Staff', location: 'Berlin, Germany', score: '70/100', link: 'https://de.linkedin.com/jobs/view/chief-of-staff-at-sumup-3426376880' },
            { id: 'job_10', title: 'Lano', role: 'Chief of Staff', location: 'Berlin, Germany (Remote-first)', score: '72/100', link: 'https://de.linkedin.com/jobs/view/chief-of-staff-at-lano-3697227655' },
            { id: 'job_11', title: 'Cartloop', role: 'Chief of Staff (Remote)', location: 'London, UK (Fully Remote)', score: '68/100', link: 'https://uk.linkedin.com/jobs/view/chief-of-staff-remote-at-cartloop-2791006327' },
            { id: 'job_12', title: 'Nikan AI Gruppe', role: 'CoS Operations', location: 'Zurich, Switzerland', score: '68/100', link: 'https://nikan-ai.com/' },

            // Jobs 13-26: –û—Ç–∫–ª–æ–Ω–µ–Ω–æ (14 –∏–∑ JSON –ù–∞—Å—Ç–∏)
            { id: 'job_13', title: 'Wave Mobile Money', role: 'Chief of Staff to CEO', location: 'Remote (GMT-3 to GMT+3)', score: '72/100', rejected_reason: '—Ñ—Ä–∞–Ω—Ü –º–∞—Å—Ç (French required)' },
            { id: 'job_14', title: 'Consensys / MetaMask', role: 'Senior Product Operations Manager', location: 'EMEA (Remote)', score: '74/100', rejected_reason: 'blockchain and web3 (–Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç)' },
            { id: 'job_15', title: 'Tacto', role: 'Strategy & Operations - Product Growth', location: 'Munich, Germany (Hybrid)', score: '70/100', rejected_reason: '—è –∫ –Ω–∏–º –ø–æ–¥–∞–≤–∞–ª–∞—Å—å —É–∂–µ (already applied)' },
            { id: 'job_16', title: 'Rhone Trust', role: 'Senior Business Manager & Corporate Governance Officer', location: 'Geneva, Switzerland (On-site)', score: '68/100', rejected_reason: '–ñ–µ–Ω–µ–≤–∞ onsite + –±–æ–ª—å—à–µ executive assistant (–Ω–µ pure CoS)' },
            { id: 'job_17', title: 'SANOVIO', role: 'Founder\'s Associate', location: 'Munich, Germany (On-site)', score: '66/100', rejected_reason: '4 –Ω–µ–¥–µ–ª–∏ –Ω–∞–∑–∞–¥ (too old)' },
            { id: 'job_18', title: 'True Wealth AG', role: 'Founder\'s Associate (Temp, 40-60%)', location: 'Zurich, Switzerland', score: '78/100', rejected_reason: '–∏–º —Å—Ä–æ—á–Ω–æ –Ω—É–∂–µ–Ω + –Ω–µ –≤ CH (urgent + not in Switzerland)' },
            { id: 'job_19', title: 'Revolut (Strategy)', role: 'Strategy & Operations Manager', location: 'Switzerland', score: '82/100', rejected_reason: '–∏–º –Ω—É–∂–Ω—ã numbers people (data-focused)' },
            { id: 'job_20', title: 'Nikan AI (rejected)', role: 'CoS Operations', location: 'Zurich, Switzerland', score: '68/100', rejected_reason: '—Å—Ç—Ä–∞–Ω–Ω—ã–π –≤–µ–±—Å–∞–π—Ç (unclear quality)' },
            { id: 'job_21', title: 'Beloy (Paris)', role: 'Chief of Staff', location: 'Paris, France', score: '78/100', rejected_reason: '–≤ –ü–∞—Ä–∏–∂–µ –Ω–∞–¥–æ –±—ã—Ç—å (onsite Paris)' },
            { id: 'job_22', title: 'Mistral AI (Paris)', role: 'Product Ops Manager', location: 'Paris, France', score: '70/100', rejected_reason: 'On-site Paris (–Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç)' },
            { id: 'job_23', title: 'Expatrio (closed)', role: 'Chief of Staff (f/m/x)', location: 'Berlin, Germany', score: '68/100', rejected_reason: 'No longer accepting applications (—Å—Ç–∞—Ä–∞—è, 2 –≥–æ–¥–∞)' },
            { id: 'job_24', title: 'SumUp (old)', role: 'Chief of Staff', location: 'Berlin, Germany', score: '70/100', rejected_reason: '3 –≥–æ–¥–∞ –Ω–∞–∑–∞–¥ –ø–æ–∑–∏—Ü–∏—è –±—ã–ª–∞ –æ—Ç–∫—Ä—ã—Ç–∞ (–æ—á–µ–Ω—å —Å—Ç–∞—Ä–∞—è)' },
            { id: 'job_25', title: 'Lano (old)', role: 'Chief of Staff', location: 'Berlin, Germany (Remote-first)', score: '72/100', rejected_reason: '—Ç–æ–∂–µ —Å—Ç–∞—Ä–∞—è (–æ—á–µ–Ω—å —Å—Ç–∞—Ä–∞—è)' },
            { id: 'job_26', title: 'Cartloop (outdated)', role: 'Chief of Staff (Remote)', location: 'London, UK (Fully Remote)', score: '68/100', rejected_reason: '–Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω–∞—è (outdated link)' },

            // Jobs 27-28: –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ (2 —à—Ç - –º–æ–∏ —Ñ–∏–ª—å—Ç—Ä—ã)
            { id: 'job_27', title: 'Thomson Reuters', role: 'Director, Product Strategy & Operations', location: 'Zug, Switzerland (Hybrid)', score: '88/100', filtered: true, filter_reason: 'domain_specific: —Ç—Ä–µ–±—É–µ—Ç –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è legal technology' },
            { id: 'job_28', title: 'Jua', role: 'Chief of Staff', location: 'Zurich, Switzerland', score: '88/100', salary: '‚Ç¨80K-100K', filtered: true, filter_reason: 'too_old: –Ω–∞—Ä—É—à–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–æ max 5 –¥–Ω–µ–π (posted 2+ months ago)' }
        ];

        // Load state from localStorage
        let rejections = JSON.parse(localStorage.getItem('emilio_rejections') || '{}');
        let interests = JSON.parse(localStorage.getItem('emilio_interests') || '{}');

        // Auto-populate rejections from job data on first load
        const jsonLoaded = localStorage.getItem('emilio_json_loaded');
        if (!jsonLoaded) {
            allJobs.forEach(job => {
                if (job.rejected_reason) {
                    rejections[job.id] = {
                        title: job.title,
                        role: job.role,
                        reason: job.rejected_reason,
                        date: new Date().toISOString()
                    };
                }
            });
            localStorage.setItem('emilio_rejections', JSON.stringify(rejections));
            localStorage.setItem('emilio_json_loaded', 'true');
            console.log('‚úÖ Auto-loaded 14 rejections from job data');
        }

        function renderJobs() {
            const container = document.getElementById('positions-container');
            container.innerHTML = '';

            allJobs.forEach(job => {
                const isRejected = rejections[job.id];
                const isInterested = interests[job.id];
                const isFiltered = job.filtered;

                let status = 'new';
                if (isRejected) status = 'rejected';
                else if (isInterested) status = 'interested';
                else if (isFiltered) status = 'filtered';

                const card = document.createElement('div');
                card.className = 'job-card';
                card.dataset.key = job.id;
                card.dataset.status = status;

                let html = `
                    <div class="job-header">
                        <div>
                            <div class="job-title">${job.title}</div>
                            <div class="job-company">${job.role}</div>
                            ${job.link ? `<div class="job-link"><a href="${job.link}" target="_blank">üîó View ‚Üí</a></div>` : ''}
                        </div>
                        ${job.score ? `<div class="job-score">${job.score}</div>` : ''}
                    </div>
                `;

                if (job.location) {
                    html += `<div class="job-details"><div class="detail"><div class="detail-label">Location</div><div class="detail-value">${job.location}</div></div></div>`;
                }

                // Show reason (reject or filter)
                if (isRejected) {
                    html += `<div class="reject-reason">‚ùå ${isRejected.reason || 'Rejected'}</div>`;
                } else if (isFiltered && job.filter_reason) {
                    html += `<div class="filter-reason">ü§ñ ${job.filter_reason}</div>`;
                } else {
                    // Show action buttons only for unprocessed jobs
                    html += `
                        <div class="actions">
                            <button class="btn btn-save" onclick="markInterested('${job.id}')">‚ù§Ô∏è –ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ</button>
                            <button class="btn btn-reject" onclick="showRejectComment('${job.id}')">‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç</button>
                        </div>
                        <div class="comment-box" id="comment_${job.id}">
                            <input type="text" placeholder="–ü—Ä–∏—á–∏–Ω–∞...">
                            <button onclick="rejectJob('${job.id}')">‚úì OK</button>
                        </div>
                    `;
                }

                card.innerHTML = html;
                container.appendChild(card);
            });

            updateStats();
        }

        function markInterested(id) {
            interests[id] = { title: allJobs.find(j => j.id === id)?.title, date: new Date().toISOString() };
            delete rejections[id];
            localStorage.setItem('emilio_interests', JSON.stringify(interests));
            localStorage.setItem('emilio_rejections', JSON.stringify(rejections));
            renderJobs();
        }

        function showRejectComment(id) {
            document.getElementById(`comment_${id}`).classList.add('show');
        }

        function rejectJob(id) {
            const input = document.querySelector(`#comment_${id} input`);
            const reason = input?.value.trim() || '(no reason)';
            const job = allJobs.find(j => j.id === id);

            rejections[id] = {
                title: job.title,
                role: job.role,
                reason: reason,
                date: new Date().toISOString()
            };
            delete interests[id];
            localStorage.setItem('emilio_rejections', JSON.stringify(rejections));
            localStorage.setItem('emilio_interests', JSON.stringify(interests));
            renderJobs();
        }

        function filterJobs(type) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');

            document.querySelectorAll('[data-status]').forEach(card => {
                const status = card.dataset.status;
                card.classList.toggle('hidden', status !== type);
            });
        }

        function updateStats() {
            let newCount = 0, interestedCount = 0, rejectedCount = 0, filteredCount = 0;
            allJobs.forEach(job => {
                if (job.filtered) filteredCount++;
                else if (rejections[job.id]) rejectedCount++;
                else if (interests[job.id]) interestedCount++;
                else newCount++;
            });
            document.getElementById('stat-new').textContent = newCount;
            document.getElementById('stat-interested').textContent = interestedCount;
            document.getElementById('stat-rejected').textContent = rejectedCount;
            document.getElementById('stat-filtered').textContent = filteredCount;
        }

        function exportToChat() {
            const data = {
                timestamp: new Date().toISOString(),
                rejections: rejections,
                interests: interests
            };
            navigator.clipboard.writeText(JSON.stringify(data, null, 2)).then(() => {
                alert('‚úÖ Exported!');
            });
        }

        renderJobs();
    </script>
</body>
</html>
